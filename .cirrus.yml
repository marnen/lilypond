osx_instance:
  image: high-sierra-xcode-9.4.1

env:
  - TARGET=lilypond
  - TARGET=lilypond-devel

before_install:
  - export MACPORTS_PREFIX=/opt/${TARGET}
  - curl -LO https://raw.githubusercontent.com/GiovanniBussi/macports-ci/master/macports-ci
  - source ./macports-ci install --prefix=${MACPORTS_PREFIX}
script:
  - sudo port mdmg ${TARGET}
  - file ${MACPORTS_PREFIX}/bin/lilypond
  - echo "Work directory for ${TARGET} is $(port work ${TARGET})"
  - port contents ${TARGET}
